# Generated by Django 5.2.7 on 2025-11-02 17:45

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("market", "0001_initial"),
        ("trading", "0003_backtest_backtestresult_and_more"),
    ]

    operations = [
        migrations.CreateModel(
            name="TickData",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True, primary_key=True, serialize=False, verbose_name="ID"
                    ),
                ),
                (
                    "instrument",
                    models.CharField(
                        max_length=10,
                        help_text="Currency pair (e.g., 'EUR_USD')",
                    ),
                ),
                (
                    "timestamp",
                    models.DateTimeField(
                        db_index=True, help_text="Timestamp when the tick was received"
                    ),
                ),
                (
                    "bid",
                    models.DecimalField(decimal_places=5, help_text="Bid price", max_digits=10),
                ),
                (
                    "ask",
                    models.DecimalField(decimal_places=5, help_text="Ask price", max_digits=10),
                ),
                (
                    "mid",
                    models.DecimalField(
                        decimal_places=5,
                        help_text="Mid price (average of bid and ask)",
                        max_digits=10,
                    ),
                ),
                (
                    "spread",
                    models.DecimalField(
                        decimal_places=5,
                        help_text="Spread (difference between ask and bid)",
                        max_digits=10,
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(
                        auto_now_add=True, help_text="Timestamp when the record was created"
                    ),
                ),
                (
                    "account",
                    models.ForeignKey(
                        help_text="OANDA account that received this tick",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="tick_data",
                        to="market.OandaAccounts",
                    ),
                ),
            ],
            options={
                "verbose_name": "Tick Data",
                "verbose_name_plural": "Tick Data",
                "db_table": "trading_tick_data",
                "ordering": ["-timestamp"],
                "indexes": [
                    models.Index(fields=["instrument"], name="trd_tick_instr_7f586e_idx"),
                    models.Index(fields=["timestamp"], name="trd_tick_time_a4b109_idx"),
                    models.Index(fields=["instrument", "timestamp"], name="trd_tick_it_b325fe_idx"),
                    models.Index(
                        fields=["account", "instrument", "timestamp"],
                        name="trd_tick_ait_0fb6f6_idx",
                    ),
                    models.Index(fields=["created_at"], name="trd_tick_created_69aebd_idx"),
                ],
            },
        ),
    ]
